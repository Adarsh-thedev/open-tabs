(this["webpackJsonpopentabs-extension"]=this["webpackJsonpopentabs-extension"]||[]).push([[0],{57:function(e,t,a){},62:function(e,t,a){e.exports=a.p+"static/media/logo2.3943f3d8.png"},63:function(e,t,a){e.exports=a.p+"static/media/logo1.75d29f4d.png"},64:function(e,t,a){e.exports=a.p+"static/media/modal-bg.601cc37b.jpg"},73:function(e,t,a){e.exports=a(94)},78:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),l=a.n(r),o=a(22),i=a(23),c=a(26),m=a(25),u=(a(78),a(79),a(80),a(31)),d=a(46),p=a(12),h=a.n(p),g=a(28),b=a(21),f=a(47),v=a(61),E=a.n(v),y=(a(57),a(14)),S=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"search"},s.a.createElement("form",{method:"get",action:"https://www.google.com/search?q=",target:"_top"},s.a.createElement("div",{className:"searchbar"},s.a.createElement("input",{type:"text",id:"q",name:"q",title:"Search",alt:"Search Text",maxLength:"256"}),s.a.createElement("button",{type:"submit",id:"searchsubmit"},s.a.createElement(y.e,null)))))}}]),a}(n.Component),w=a(18),N=a(62),k=a.n(N),O=a(115),I=a(63),x=a.n(I),C=a(36),j=a(64),_=a.n(j),L=a(71),P=a(41),T=s.a.createElement(P.a,{id:"popover-basic",className:"mt-2"},s.a.createElement("div",null,s.a.createElement(P.a.Title,{as:"h3"},s.a.createElement("strong",{className:"mr-auto",style:{textAlign:"left"}},"OpenTabs' Brand New Look!",s.a.createElement("br",null),s.a.createElement("small",null,"(Update June 2020)"))),s.a.createElement(P.a.Content,null,s.a.createElement("div",null,"After much preparation, we are launching our ready-for-market version of OpenTabs! A huge thank you to our beta users for your continued support.",s.a.createElement("br",null),s.a.createElement("br",null),"We urge you to please share OpenTabs with your friends and family to further grow our mission of ending poverty and fighting climate change in innovative ways.",s.a.createElement("br",null),s.a.createElement("br",null),"If you haven't yet, we invite you to create an account (by clicking on the settings icon on the lower left) to ensure that you never lose your tabs count again.",s.a.createElement("br",null),s.a.createElement("br",null),"Stay tuned for exciting updates coming soon.")))),B=function(){return s.a.createElement(L.a,{trigger:"click",placement:"left",overlay:T,rootClose:!0},s.a.createElement(C.a,{id:"update-btn"},s.a.createElement(y.a,null)))},A="tabs_opened",D={content:{width:"100%",height:"100vh",opacity:"1",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",background:"none",backgroundImage:"url("+{Background:_.a}+")",overflow:"none",position:"fixed",padding:"0 20px"}},K={height:"100vh",width:"100%",opacity:"1"};function F(e){return{name:e.length<1}}var J=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a),(e=t.call(this)).resetForm=Object(g.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/users/update_tabs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("email"),tabs_opened:localStorage.getItem(A)})});case 2:e.setState({name:""}),localStorage.setItem("name",e.state.name),e.setState({email:""}),localStorage.setItem("email",e.state.email),e.setState({password:""}),localStorage.setItem("password",e.state.password),e.setState({login:!0}),localStorage.setItem("login",e.state.login),e.setState({modalIsOpen:!0}),window.localStorage.clear(e.state.login),localStorage.clear(e.state.login),e.setState({tabs_opened:e.state.tabs_opened}),localStorage.setItem(A,e.state.tabs_opened);case 15:case"end":return t.stop()}}),t)}))),e.handleBlur=function(t){return function(a){e.setState({touched:Object(d.a)(Object(d.a)({},e.state.touched),{},Object(u.a)({},t,!0))})}},e.callApi=Object(g.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/register");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),e.callApi=Object(g.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/update_tabs");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,200===t.status){e.next=8;break}throw Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),e.handleSubmit=function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),null==(n=e.getCookie("tab"))?console.log("cookie doesnt exist"):e.setState({tabs_opened:n}),t.next=5,fetch("/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.state.name,email:e.state.email,password:e.state.password,tabs_opened:e.state.tabs_opened,method:"local"})}).then((function(e){return e.json()})).then((function(t){t.errors?(e.setState({modalIsOpen:!0}),alert("Please enter valid login details!"),e.setState({login:!0}),localStorage.setItem("login",e.state.login)):(e.setState({modalIsOpen:!1}),e.setState({name:e.state.name}),localStorage.setItem("name",e.state.name),e.setState({email:e.state.email}),localStorage.setItem("email",e.state.email),e.setState({password:e.state.password}),localStorage.setItem("password",e.state.password),e.setState({tabs_opened:t.user.tabs_opened}),localStorage.setItem(A,e.state.tabs_opened),e.setState({login:!1}),localStorage.setItem("login",e.state.login))}));case 5:e.setState({modalIsOpen:e.state.modalIsOpen});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLoad=function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("/api/users/single_update_tabs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("email")})});case 3:e.setState((function(e,t){t.tabs_opened;return{tabs_opened:e.tabs_opened+1}})),e.setState({tabs_opened:e.state.tabs_opened}),localStorage.setItem(A,e.state.tabs_opened),e.setState({modalIsOpen:e.state.modalIsOpen}),e.setState((function(e,t){t.login;return{login:e.login}})),e.setState({login:e.state.login}),localStorage.setItem("login",e.state.login);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.stayloggedout=function(){e.setState({name:e.state.name}),localStorage.setItem("name",e.state.name),e.setState({modalIsOpen:!1}),e.setState({email:""}),e.setState({password:""}),e.setState({tabs_opened:0}),e.setState({tabs_opened:e.state.tabs_opened}),localStorage.getItem("login"),e.setState({login:!0}),localStorage.setItem("login",e.state.login)},e.handleClick=function(){e.setState((function(e,t){t.tabs_opened;return{tabs_opened:e.tabs_opened+1}})),localStorage.setItem(A,e.state.tabs_opened+1)},e.validatename=function(t){e.canBeSubmitted()||t.preventDefault()},e.validateemail=function(t){e.EmailcanBeSubmitted()||t.preventDefault()};var n=e.getTime();return e.state={time:n,name:"",email:"",password:"",showPopup:!1,errors:{name:"",email:"",password:""},tabs_opened:JSON.parse(localStorage.getItem(A)),isNameRequired:!0,salutation:e.determineSalutation(n.hour),login:JSON.parse(localStorage.getItem("login"))||!1,touched:{email:!1,name:!1,password:!1},response:"",post:"",responseToPost:""},e.baseState=e.state,e.handleChangeName=e.handleChangeName.bind(Object(b.a)(e)),e.handleChangeEmail=e.handleChangeEmail.bind(Object(b.a)(e)),e.handleChangePassword=e.handleChangePassword.bind(Object(b.a)(e)),e.handleLoad=e.handleLoad.bind(Object(b.a)(e)),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("load",this.handleLoad);var t=localStorage.getItem("name");t?this.setState({name:t}):this.setState({modalIsOpen:!0}),this.interval=setInterval((function(){var t=f.DateTime.local();e.setState({time:t,salutation:e.determineSalutation(t.hour)})}),1e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval),window.removeEventListener("load",this.handleLoad)}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"onKeyPress",value:function(e){13===e.which&&e.preventDefault()}},{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"determineSalutation",value:function(e){return e>11&&e<19?"afternoon":e>18?"evening":"morning"}},{key:"getTime",value:function(){return f.DateTime.local()}},{key:"getCookie",value:function(e){var t=document.cookie,a=e+"=",n=t.indexOf("; "+a);if(-1===n){if(0!==(n=t.indexOf(a)))return null}else{n+=2;var s=document.cookie.indexOf(";",n);-1===s&&(s=t.length)}return decodeURI(t.substring(n+a.length,s))}},{key:"canBeSubmitted",value:function(){var e=F(this.state.name);return!Object.keys(e).some((function(t){return e[t]}))}},{key:"EmailcanBeSubmitted",value:function(){var e=F(this.state.email);return!Object.keys(e).some((function(t){return e[t]}))}},{key:"render",value:function(){var e=this,t=F(this.state.name,this.state.email,this.state.password),a=function(a){var n=t[a],s=e.state.touched[a];return!!n&&s};return s.a.createElement("div",{className:"bg",style:K},s.a.createElement("div",{className:"bg-wrapper"},s.a.createElement(E.a,{isOpen:this.state.modalIsOpen,style:D,contentLabel:"name-modal",ariaHideApp:!1},s.a.createElement("img",{src:k.a,width:"80",height:"99",alt:"OpenTabs logo",className:"User-Logo"}),s.a.createElement("div",{className:"form-container"},s.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},s.a.createElement("input",{id:"step2",type:"checkbox"}),s.a.createElement("input",{id:"step3",type:"checkbox"}),s.a.createElement("div",{id:"part1",className:"form-group"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("h1",{className:"panel-title"},"Hello, what's your name?")),s.a.createElement("input",{type:"text",name:"name",onChange:this.handleChangeName,className:a("name")?"error":"",placeholder:"","aria-describedby":"sizing-addon1",onBlur:this.handleBlur("name"),value:this.state.name,onKeyPress:this.onKeyPress,required:!0,pattern:"\\S+",noValidate:!0}),s.a.createElement("div",{className:"btn-group btn-group-lg",role:"group","aria-label":"..."},s.a.createElement("label",{htmlFor:"step2",id:"continue-step2",className:"continue"},s.a.createElement("div",{className:"btn btn-default btn-primary btn-lg",onClick:this.validatename},"Continue"))))),s.a.createElement("div",{id:"part2",className:"form-group"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("h1",{className:"panel-title"},"What's your email, ",this.state.name,"?")),s.a.createElement("input",{type:"email",name:"email",onChange:this.handleChangeEmail,className:a("email")?"error":"",placeholder:"","aria-describedby":"sizing-addon1",onBlur:this.handleBlur("email"),value:this.state.email,onKeyPress:this.onKeyPress,noValidate:!0,pattern:"/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/",required:!0}),s.a.createElement("div",{className:"errorspan"},s.a.createElement("span",{className:this.state.email.length>0&&!/(.+)@(.+){2,}\.(.+){2,}/.test(this.state.email)?"error":"hidden"},"'",this.state.email,"' is not a valid email ")),s.a.createElement("div",{className:"btn-group btn-group-lg btn-group-justified",role:"group","aria-label":"..."},s.a.createElement("label",{htmlFor:"step3",id:"continue-step3",className:"continue"},s.a.createElement("div",{className:"btn btn-default btn-primary btn-lg",role:"button",onClick:this.validateemail},"Continue"))),s.a.createElement("div",{className:"StayLoggedOut"},s.a.createElement("p",null,"Or would you rather stay logged out?",s.a.createElement("button",{onClick:this.stayloggedout},"Stay logged out"))))),s.a.createElement("div",{id:"part3",className:"form-group"},s.a.createElement("div",{className:"panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("h1",{className:"panel-title"},this.state.name,", enter password")),s.a.createElement("input",{type:"password",name:"password",onChange:this.handleChangePassword,className:a("password")?"error":"",placeholder:"","aria-describedby":"sizing-addon1",onBlur:this.handleBlur("password"),value:this.state.password,onKeyPress:this.onKeyPress,noValidate:!0}),s.a.createElement("div",{className:"errorspan"},s.a.createElement("span",{className:this.state.password.length>0&&this.state.password.length<5?"error":"hidden"},"Password should be at least five characters.")),s.a.createElement("div",{className:"btn-group btn-group-lg",role:"group","aria-label":"..."},s.a.createElement("label",{className:"continue"},s.a.createElement("button",{type:"submit",id:"submitbtn",className:"btn btn-default btn-primary btn-lg",onClick:this.handleSubmit},"Continue"))),s.a.createElement("label",{htmlFor:"step3",id:"back-step3",className:"back"},s.a.createElement("div",{className:"btn btn-default btn-primary btn-lg"},"Use a different email address"))))))),s.a.createElement("div",{className:"top-content"},s.a.createElement("div",{className:"widgets"},s.a.createElement("div",{className:"header"},s.a.createElement("div",{className:"text-right top-left logo"},s.a.createElement("div",{className:"logo-counter"},s.a.createElement(B,null),s.a.createElement("div",{className:"tab-counter"},s.a.createElement(O.a,{disableFocusListener:!0,title:"No. of Tabs Opened",enterDelay:500,leaveDelay:200},s.a.createElement("div",{onLoad:this.handleLoad,style:{padding:"8px 8px",position:"relative",display:"block"}},s.a.createElement("button",{style:{border:"none",background:"none"}},this.state.tabs_opened)))),s.a.createElement("img",{src:x.a,width:"35",height:"35",className:"d-inline-block align-top",alt:"OpenTabs logo"})))))),s.a.createElement("div",{className:"bottom-content"},s.a.createElement("div",{className:"text-left bottom-left"},s.a.createElement(w.a,{id:"settings"},s.a.createElement(w.a.Toggle,null,s.a.createElement(y.f,null)),s.a.createElement(w.a.Menu,null,s.a.createElement(w.a.Item,{eventKey:"1",href:"http://opentabs.org"},s.a.createElement(y.c,null)," Home"),s.a.createElement(w.a.Item,{eventKey:"2",href:"https://docs.google.com/forms/d/e/1FAIpQLScNIVjuhLCUF_CczUf2eCP3VOIiIfl-UhJAsh-f-SJbUq7WnQ/viewform"},s.a.createElement(y.g,null)," Feedback"),s.a.createElement(w.a.Item,{eventKey:"3",href:"https://donorbox.org/opentabs"},s.a.createElement(y.b,null)," Donate"),s.a.createElement(w.a.Item,{eventKey:"4",onClick:this.resetForm,onLoad:this.handleLoad},s.a.createElement(y.d,null)," ",this.state.login?"Login":"Log Out"))))),s.a.createElement("div",{className:"text-center centered"},s.a.createElement("div",{className:"block-text"},s.a.createElement("h1",{id:"time"},this.state.time.toFormat("HH':'mm"))),s.a.createElement("h3",{id:"greetings"},"Good ",this.state.salutation,", ",this.state.name,"."),s.a.createElement("div",{className:"Search"},s.a.createElement(S,null)))))}}]),a}(n.Component),U=a(68),q=a(6),z=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement(U.a,null,s.a.createElement(q.c,null,s.a.createElement(q.a,{exact:!0,path:"/"}),s.a.createElement(q.a,{path:"/tabbing"},s.a.createElement(J,null))))}}]),a}(n.Component);a(93);l.a.render(s.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[73,1,2]]]);
//# sourceMappingURL=main.e6cab1f9.chunk.js.map